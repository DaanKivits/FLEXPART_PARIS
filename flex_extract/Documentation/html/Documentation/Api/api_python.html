

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Auto-generated documentation for the Python scripts &mdash; flex_extract 7.1.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Auto-generated documentation for the Fortran programme" href="api_fortran.html" />
    <link rel="prev" title="Auto-generated documentation" href="../api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> flex_extract
          

          
          </a>

          
            
            
              <div class="version">
                7.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ecmwf_data.html">ECMWF Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../documentation.html">Code-Level Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input.html">Control &amp; input data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../output.html">Output data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../disagg.html">Disaggregation of flux data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vertco.html">Vertical wind</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html">Auto-generated documentation</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Auto-generated documentation for the Python scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#programs">Programs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modules">Modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api_fortran.html">Auto-generated documentation for the Fortran programme</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Support/faq.html">FAQ - Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Developer Team</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">flex_extract</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../documentation.html">Code-Level Documentation</a> &raquo;</li>
        
          <li><a href="../api.html">Auto-generated documentation</a> &raquo;</li>
        
      <li>Auto-generated documentation for the Python scripts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Documentation/Api/api_python.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="auto-generated-documentation-for-the-python-scripts">
<h1>Auto-generated documentation for the Python scripts<a class="headerlink" href="#auto-generated-documentation-for-the-python-scripts" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#programs" id="id3">Programs</a></p>
<ul>
<li><p><a class="reference internal" href="#module-install" id="id4">install</a></p></li>
<li><p><a class="reference internal" href="#module-submit" id="id5">submit</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#classes" id="id6">Classes</a></p>
<ul>
<li><p><a class="reference internal" href="#module-ControlFile" id="id7">ControlFile</a></p></li>
<li><p><a class="reference internal" href="#module-EcFlexpart" id="id8">EcFlexpart</a></p></li>
<li><p><a class="reference internal" href="#module-GribUtil" id="id9">GribUtil</a></p></li>
<li><p><a class="reference internal" href="#module-MarsRetrieval" id="id10">MarsRetrieval</a></p></li>
<li><p><a class="reference internal" href="#module-UioFiles" id="id11">UioFiles</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#modules" id="id12">Modules</a></p>
<ul>
<li><p><a class="reference internal" href="#module-get_mars_data" id="id13">get_mars_data</a></p></li>
<li><p><a class="reference internal" href="#module-prepare_flexpart" id="id14">prepare_flexpart</a></p></li>
<li><p><a class="reference internal" href="#module-tools" id="id15">tools</a></p></li>
<li><p><a class="reference internal" href="#module-checks" id="id16">checks</a></p></li>
<li><p><a class="reference internal" href="#module-disaggregation" id="id17">disaggregation</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="programs">
<h2><a class="toc-backref" href="#id3">Programs</a><a class="headerlink" href="#programs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-install">
<span id="install"></span><h3><a class="toc-backref" href="#id4">install</a><a class="headerlink" href="#module-install" title="Permalink to this headline">¶</a></h3>
<p>This script installs the flex_extract program.</p>
<p>Depending on the selected installation environment (locally or on the
ECMWF server ecgate or cca) the program extracts the command line
arguments and the CONTROL file parameter and prepares the corresponding
environment.
The necessary files are collected in a tar ball and placed
at the target location. There, is is untared, the environment variables are
set, and the Fortran code is compiled.
If the ECMWF environment is selected, a job script is prepared and submitted
for the remaining configurations after putting the tar ball on the
target ECMWF server.</p>
<p>Type: install.py –help
to get information about command line parameters.
Read the documentation for usage instructions.</p>
<dl class="function">
<dt id="install.check_install_conditions">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">check_install_conditions</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#check_install_conditions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.check_install_conditions" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks necessary attributes and conditions
for the installation, e.g. whether they exist and contain values.
Otherwise set default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.del_fortran_build">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">del_fortran_build</code><span class="sig-paren">(</span><em class="sig-param">src_path</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#del_fortran_build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.del_fortran_build" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean up the Fortran source directory and remove all
build files (e.g. *.o, *.mod and FORTRAN EXECUTABLE)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>src_path</strong> (<em>str</em>) – Path to the fortran source directory.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.get_install_cmdline_args">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">get_install_cmdline_args</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#get_install_cmdline_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.get_install_cmdline_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Decomposes the command line arguments and assigns them to variables.
Apply default values for arguments not present.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>args</strong> – Contains the commandline arguments from script/program call.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Namespace</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.install_local">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">install_local</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#install_local"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.install_local" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the actual installation on a local machine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.install_via_gateway">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">install_via_gateway</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#install_via_gateway"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.install_via_gateway" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare data transfer to remote gateway and submit a job script which will
install everything on the remote gateway.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.main">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls the installation process. Calls the installation function
if target is specified.</p>
</dd></dl>

<dl class="function">
<dt id="install.mk_compilejob">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">mk_compilejob</code><span class="sig-paren">(</span><em class="sig-param">makefile</em>, <em class="sig-param">ecuid</em>, <em class="sig-param">ecgid</em>, <em class="sig-param">fp_root</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#mk_compilejob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.mk_compilejob" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the original job template file so that it is specified
for the user and the environment were it will be applied. Result
is stored in a new file “job.temp” in the python directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>makefile</strong> (<em>str</em>) – Name of the makefile which should be used to compile the Fortran
program.</p></li>
<li><p><strong>ecuid</strong> (<em>str</em>) – The user id on ECMWF server.</p></li>
<li><p><strong>ecgid</strong> (<em>str</em>) – The group id on ECMWF server.</p></li>
<li><p><strong>fp_root</strong> (<em>str</em>) – Path to the root directory of FLEXPART environment or flex_extract
environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.mk_env_vars">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">mk_env_vars</code><span class="sig-paren">(</span><em class="sig-param">ecuid</em>, <em class="sig-param">ecgid</em>, <em class="sig-param">gateway</em>, <em class="sig-param">destination</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#mk_env_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.mk_env_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a file named ECMWF_ENV which contains the
necessary environmental variables at ECMWF servers.
It is based on the template ECMWF_ENV.template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ecuid</strong> (<em>str</em>) – The user id on ECMWF server.</p></li>
<li><p><strong>ecgid</strong> (<em>str</em>) – The group id on ECMWF server.</p></li>
<li><p><strong>gateway</strong> (<em>str</em>) – The gateway server the user is using.</p></li>
<li><p><strong>destination</strong> (<em>str</em>) – The remote destination which is used to transfer files
from ECMWF server to local gateway server.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.mk_fortran_build">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">mk_fortran_build</code><span class="sig-paren">(</span><em class="sig-param">src_path</em>, <em class="sig-param">makefile</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#mk_fortran_build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.mk_fortran_build" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles the Fortran code and generates the executable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_path</strong> (<em>str</em>) – Path to the fortran source directory.</p></li>
<li><p><strong>makefile</strong> (<em>str</em>) – The name of the makefile which should be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.mk_job_template">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">mk_job_template</code><span class="sig-paren">(</span><em class="sig-param">ecuid</em>, <em class="sig-param">ecgid</em>, <em class="sig-param">fp_root</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#mk_job_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.mk_job_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the original job template file so that it is specified
for the user and the environment were it will be applied. Result
is stored in a new file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ecuid</strong> (<em>str</em>) – The user id on ECMWF server.</p></li>
<li><p><strong>ecgid</strong> (<em>str</em>) – The group id on ECMWF server.</p></li>
<li><p><strong>fp_root</strong> (<em>str</em>) – Path to the root directory of FLEXPART environment or flex_extract
environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.mk_tarball">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">mk_tarball</code><span class="sig-paren">(</span><em class="sig-param">tarball_path</em>, <em class="sig-param">target</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#mk_tarball"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.mk_tarball" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a tarball with all necessary files which need to be sent to the
installation directory.
It does not matter whether this is local or remote.
Collects all Python files, the Fortran source and makefiles,
the ECMWF_ENV file, the CONTROL files as well as the
template files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tarball_path</strong> (<em>str</em>) – The complete path to the tar file which will contain all
relevant data for flex_extract.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – The queue where the job is submitted to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="install.un_tarball">
<code class="sig-prename descclassname">install.</code><code class="sig-name descname">un_tarball</code><span class="sig-paren">(</span><em class="sig-param">tarball_path</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/install.html#un_tarball"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#install.un_tarball" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the given tarball into current directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tarball_path</strong> (<em>str</em>) – The complete path to the tar file which will contain all
relevant data for flex_extract.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-submit">
<span id="submit"></span><h3><a class="toc-backref" href="#id5">submit</a><a class="headerlink" href="#module-submit" title="Permalink to this headline">¶</a></h3>
<p>This script allows the user to extract meteorological fields from the ECMWF.</p>
<p>It prepares the settings for retrieving the data from ECMWF servers and
process the resulting files to prepare them for the use with FLEXPART or
FLEXTRA.</p>
<p>If it is supposed to work locally then it works through the necessary
functions get_mars_data and prepare_flexpart. Otherwise it prepares
a job script (korn shell) which will do the necessary work on the
ECMWF server. This script will de submitted via the ecaccess command
ecaccess-job-submit.</p>
<p>This file can also be imported as a module which then contains the following
functions:</p>
<blockquote>
<div><ul class="simple">
<li><p>main - the main function of the script</p></li>
<li><p>submit - calls mk_jobscript depending on operation mode and submits its</p></li>
<li><p>mk_jobscript - creates the job script from a template</p></li>
</ul>
</div></blockquote>
<p>Type: submit.py –help
to get information about command line parameters.
Read the documentation for usage instructions.</p>
<dl class="function">
<dt id="submit.main">
<code class="sig-prename descclassname">submit.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/submit.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#submit.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the arguments from script call and from CONTROL file.
Decides from the argument “queue” if the local version
is done “queue=None” or the gateway version with “queue=ecgate”
or “queue=cca”.</p>
</dd></dl>

<dl class="function">
<dt id="submit.mk_jobscript">
<code class="sig-prename descclassname">submit.</code><code class="sig-name descname">mk_jobscript</code><span class="sig-paren">(</span><em class="sig-param">jtemplate</em>, <em class="sig-param">job_file</em>, <em class="sig-param">clist</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/submit.html#mk_jobscript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#submit.mk_jobscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the job script from template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jtemplate</strong> (<em>str</em>) – Job template file from sub-directory “Templates” for
submission to ECMWF. It contains all necessary
module and variable settings for the ECMWF environment as well as
the job call and mail report instructions.
Default is _config.TEMPFILE_JOB.</p></li>
<li><p><strong>job_file</strong> (<em>str</em>) – Path to the job script file.</p></li>
<li><p><strong>clist</strong> (<em>list of str</em>) – Contains all necessary parameters for ECMWF CONTROL file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="submit.submit">
<code class="sig-prename descclassname">submit.</code><code class="sig-name descname">submit</code><span class="sig-paren">(</span><em class="sig-param">jtemplate</em>, <em class="sig-param">c</em>, <em class="sig-param">queue</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/submit.html#submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#submit.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the job script and submits it to the specified queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jtemplate</strong> (<em>str</em>) – Job template file from sub-directory “_templates” for
submission to ECMWF. It contains all necessary
module and variable settings for the ECMWF environment as well as
the job call and mail report instructions.
Default is _config.TEMPFILE_JOB.</p></li>
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
<li><p><strong>queue</strong> (<em>str</em>) – Name of queue for submission to ECMWF (e.g. ecgate or cca )</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="classes">
<h2><a class="toc-backref" href="#id6">Classes</a><a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-ControlFile">
<span id="controlfile"></span><h3><a class="toc-backref" href="#id7">ControlFile</a><a class="headerlink" href="#module-ControlFile" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ControlFile.ControlFile">
<em class="property">class </em><code class="sig-prename descclassname">ControlFile.</code><code class="sig-name descname">ControlFile</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ControlFile.html#ControlFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlFile.ControlFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains the information which are stored in the CONTROL files.</p>
<p>The CONTROL file is the steering part of the FLEXPART extraction
software. All necessary parameters needed to retrieve the data fields
from the MARS archive for driving FLEXPART are set in a CONTROL file.
Some specific parameters like the start and end dates can be overwritten
by the command line parameters, but in generall all parameters needed
for a complete set of fields for FLEXPART can be set in the CONTROL file.</p>
<dl class="attribute">
<dt id="ControlFile.ControlFile.controlfile">
<code class="sig-name descname">controlfile</code><a class="headerlink" href="#ControlFile.ControlFile.controlfile" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the control file to be processed. Default value is the
filename passed to the init function when initialised.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.start_date">
<code class="sig-name descname">start_date</code><a class="headerlink" href="#ControlFile.ControlFile.start_date" title="Permalink to this definition">¶</a></dt>
<dd><p>The first day of the retrieval period. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.end_date">
<code class="sig-name descname">end_date</code><a class="headerlink" href="#ControlFile.ControlFile.end_date" title="Permalink to this definition">¶</a></dt>
<dd><p>The last day of the retrieval period. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.date_chunk">
<code class="sig-name descname">date_chunk</code><a class="headerlink" href="#ControlFile.ControlFile.date_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>Length of period for a single mars retrieval. Default value is 3.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.dtime">
<code class="sig-name descname">dtime</code><a class="headerlink" href="#ControlFile.ControlFile.dtime" title="Permalink to this definition">¶</a></dt>
<dd><p>The time step in hours. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.basetime">
<code class="sig-name descname">basetime</code><a class="headerlink" href="#ControlFile.ControlFile.basetime" title="Permalink to this definition">¶</a></dt>
<dd><p>The time for a half day retrieval. The 12 hours upfront are to be
retrieved. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.maxstep">
<code class="sig-name descname">maxstep</code><a class="headerlink" href="#ControlFile.ControlFile.maxstep" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum forecast step for non flux data. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.type">
<code class="sig-name descname">type</code><a class="headerlink" href="#ControlFile.ControlFile.type" title="Permalink to this definition">¶</a></dt>
<dd><p>List of field type per retrieving hour. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.time">
<code class="sig-name descname">time</code><a class="headerlink" href="#ControlFile.ControlFile.time" title="Permalink to this definition">¶</a></dt>
<dd><p>List of retrieving times in hours. Default valuer is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.step">
<code class="sig-name descname">step</code><a class="headerlink" href="#ControlFile.ControlFile.step" title="Permalink to this definition">¶</a></dt>
<dd><p>List of forecast time steps in hours for non flux data.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str or str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.acctype">
<code class="sig-name descname">acctype</code><a class="headerlink" href="#ControlFile.ControlFile.acctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The field type for the accumulated forecast fields.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.acctime">
<code class="sig-name descname">acctime</code><a class="headerlink" href="#ControlFile.ControlFile.acctime" title="Permalink to this definition">¶</a></dt>
<dd><p>The starting time of the accumulated forecasts. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.accmaxstep">
<code class="sig-name descname">accmaxstep</code><a class="headerlink" href="#ControlFile.ControlFile.accmaxstep" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum forecast step for the accumulated forecast fields
(flux data). Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.marsclass">
<code class="sig-name descname">marsclass</code><a class="headerlink" href="#ControlFile.ControlFile.marsclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Characterisation of dataset. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.dataset">
<code class="sig-name descname">dataset</code><a class="headerlink" href="#ControlFile.ControlFile.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>For public datasets there is the specific naming and parameter
dataset which has to be used to characterize the type of
data. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.stream">
<code class="sig-name descname">stream</code><a class="headerlink" href="#ControlFile.ControlFile.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the forecasting system used to generate the data.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.number">
<code class="sig-name descname">number</code><a class="headerlink" href="#ControlFile.ControlFile.number" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects the member in ensemble forecast run. Default value is ‘OFF’.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.expver">
<code class="sig-name descname">expver</code><a class="headerlink" href="#ControlFile.ControlFile.expver" title="Permalink to this definition">¶</a></dt>
<dd><p>The version number of the dataset. Default value is ‘1’.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.gaussian">
<code class="sig-name descname">gaussian</code><a class="headerlink" href="#ControlFile.ControlFile.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>This parameter is deprecated and should no longer be used.
Specifies the desired type of Gaussian grid for the output.
Default value is an empty string ‘’.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.grid">
<code class="sig-name descname">grid</code><a class="headerlink" href="#ControlFile.ControlFile.grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the output grid which can be either a Gaussian grid
or a Latitude/Longitude grid. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.area">
<code class="sig-name descname">area</code><a class="headerlink" href="#ControlFile.ControlFile.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the desired sub-area of data to be extracted.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.left">
<code class="sig-name descname">left</code><a class="headerlink" href="#ControlFile.ControlFile.left" title="Permalink to this definition">¶</a></dt>
<dd><p>The western most longitude of the area to be extracted.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.lower">
<code class="sig-name descname">lower</code><a class="headerlink" href="#ControlFile.ControlFile.lower" title="Permalink to this definition">¶</a></dt>
<dd><p>The southern most latitude of the area to be extracted.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.upper">
<code class="sig-name descname">upper</code><a class="headerlink" href="#ControlFile.ControlFile.upper" title="Permalink to this definition">¶</a></dt>
<dd><p>The northern most latitued of the area to be extracted.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.right">
<code class="sig-name descname">right</code><a class="headerlink" href="#ControlFile.ControlFile.right" title="Permalink to this definition">¶</a></dt>
<dd><p>The eastern most longitude of the area to be extracted.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.level">
<code class="sig-name descname">level</code><a class="headerlink" href="#ControlFile.ControlFile.level" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the maximum level. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.levelist">
<code class="sig-name descname">levelist</code><a class="headerlink" href="#ControlFile.ControlFile.levelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the required level list. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.resol">
<code class="sig-name descname">resol</code><a class="headerlink" href="#ControlFile.ControlFile.resol" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the desired triangular truncation of retrieved data,
before carrying out any other selected post-processing.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.gauss">
<code class="sig-name descname">gauss</code><a class="headerlink" href="#ControlFile.ControlFile.gauss" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select gaussian fields (1) or regular lat/lon (0).
Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.accuracy">
<code class="sig-name descname">accuracy</code><a class="headerlink" href="#ControlFile.ControlFile.accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the number of bits per value to be used in the
generated GRIB coded fields. Default value is 24.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.omega">
<code class="sig-name descname">omega</code><a class="headerlink" href="#ControlFile.ControlFile.omega" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select omega retrieval (1) or not (0). Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.omegadiff">
<code class="sig-name descname">omegadiff</code><a class="headerlink" href="#ControlFile.ControlFile.omegadiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to decide to calculate Omega and Dps/Dt from continuity
equation for diagnostic purposes (1) or not (0). Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.eta">
<code class="sig-name descname">eta</code><a class="headerlink" href="#ControlFile.ControlFile.eta" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select direct retrieval of etadot from MARS (1) or
wether it has to be calculated (0). Then Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.etadiff">
<code class="sig-name descname">etadiff</code><a class="headerlink" href="#ControlFile.ControlFile.etadiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select calculation of etadot and Dps/Dt from continuity
equation for diagnostic purposes (1) or not (0). Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.etapar">
<code class="sig-name descname">etapar</code><a class="headerlink" href="#ControlFile.ControlFile.etapar" title="Permalink to this definition">¶</a></dt>
<dd><p>GRIB parameter Id for etadot fields. Default value is 77.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.dpdeta">
<code class="sig-name descname">dpdeta</code><a class="headerlink" href="#ControlFile.ControlFile.dpdeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select multiplication of etadot with dpdeta.
Default value is 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.smooth">
<code class="sig-name descname">smooth</code><a class="headerlink" href="#ControlFile.ControlFile.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Spectral truncation of ETADOT after calculation on Gaussian grid.
Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.format">
<code class="sig-name descname">format</code><a class="headerlink" href="#ControlFile.ControlFile.format" title="Permalink to this definition">¶</a></dt>
<dd><p>The format of the GRIB data. Default value is ‘GRIB1’.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.addpar">
<code class="sig-name descname">addpar</code><a class="headerlink" href="#ControlFile.ControlFile.addpar" title="Permalink to this definition">¶</a></dt>
<dd><p>List of additional surface level ECMWF parameter to be retrieved.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.prefix">
<code class="sig-name descname">prefix</code><a class="headerlink" href="#ControlFile.ControlFile.prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Prefix string for the final FLEXPART/FLEXTRA ready input files.
Default value is ‘EN’.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.cwc">
<code class="sig-name descname">cwc</code><a class="headerlink" href="#ControlFile.ControlFile.cwc" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select wether the sum of cloud liquid water content and
cloud ice water content should be retrieved. Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.wrf">
<code class="sig-name descname">wrf</code><a class="headerlink" href="#ControlFile.ControlFile.wrf" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select further parameters for retrievment to support
WRF simulations. Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.ecfsdir">
<code class="sig-name descname">ecfsdir</code><a class="headerlink" href="#ControlFile.ControlFile.ecfsdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the ECMWF storage  ‘ectmp:/${USER}/econdemand/’</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.mailfail">
<code class="sig-name descname">mailfail</code><a class="headerlink" href="#ControlFile.ControlFile.mailfail" title="Permalink to this definition">¶</a></dt>
<dd><p>Email list for sending error log files from ECMWF servers.
The email addresses should be seperated by a comma.
Default value is [‘${USER}’].</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.mailops">
<code class="sig-name descname">mailops</code><a class="headerlink" href="#ControlFile.ControlFile.mailops" title="Permalink to this definition">¶</a></dt>
<dd><p>Email list for sending operational log files from ECMWF servers.
The email addresses should be seperated by a comma.
Default value is [‘${USER}’].</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.ecstorage">
<code class="sig-name descname">ecstorage</code><a class="headerlink" href="#ControlFile.ControlFile.ecstorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select storage of FLEXPART ready output files
in the ECFS file system. Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.ectrans">
<code class="sig-name descname">ectrans</code><a class="headerlink" href="#ControlFile.ControlFile.ectrans" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select the transfer of FLEXPART ready output files
to the gateway server. Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.inputdir">
<code class="sig-name descname">inputdir</code><a class="headerlink" href="#ControlFile.ControlFile.inputdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the temporary directory for the retrieval grib files and
other processing files. Default value is _config.PATH_INPUT_DIR.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.outputdir">
<code class="sig-name descname">outputdir</code><a class="headerlink" href="#ControlFile.ControlFile.outputdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the final directory where the final FLEXPART ready input
files are stored. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.flexextractdir">
<code class="sig-name descname">flexextractdir</code><a class="headerlink" href="#ControlFile.ControlFile.flexextractdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the flex_extract root directory. Default value is
_config.PATH_FLEXEXTRACT_DIR.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.exedir">
<code class="sig-name descname">exedir</code><a class="headerlink" href="#ControlFile.ControlFile.exedir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the FORTRAN executable file. Default value is
_config.PATH_FORTRAN_SRC.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.installdir">
<code class="sig-name descname">installdir</code><a class="headerlink" href="#ControlFile.ControlFile.installdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to a FLEXPART root directory. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.makefile">
<code class="sig-name descname">makefile</code><a class="headerlink" href="#ControlFile.ControlFile.makefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the makefile to be used for the Fortran program.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.destination">
<code class="sig-name descname">destination</code><a class="headerlink" href="#ControlFile.ControlFile.destination" title="Permalink to this definition">¶</a></dt>
<dd><p>The remote destination which is used to transfer files
from ECMWF server to local gateway server. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.gateway">
<code class="sig-name descname">gateway</code><a class="headerlink" href="#ControlFile.ControlFile.gateway" title="Permalink to this definition">¶</a></dt>
<dd><p>The gateway server the user is using. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.ecuid">
<code class="sig-name descname">ecuid</code><a class="headerlink" href="#ControlFile.ControlFile.ecuid" title="Permalink to this definition">¶</a></dt>
<dd><p>The user id on ECMWF server. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.ecgid">
<code class="sig-name descname">ecgid</code><a class="headerlink" href="#ControlFile.ControlFile.ecgid" title="Permalink to this definition">¶</a></dt>
<dd><p>The group id on ECMWF server. Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.install_target">
<code class="sig-name descname">install_target</code><a class="headerlink" href="#ControlFile.ControlFile.install_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the location where the installation is to be done.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.debug">
<code class="sig-name descname">debug</code><a class="headerlink" href="#ControlFile.ControlFile.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to keep temporary files at the end of postprocessing (1) or
to delete all temporary files except the final output files (0).
Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.oper">
<code class="sig-name descname">oper</code><a class="headerlink" href="#ControlFile.ControlFile.oper" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to prepare the operational job script. Start date, end date and
basetime will be prepared with environment variables.
Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.request">
<code class="sig-name descname">request</code><a class="headerlink" href="#ControlFile.ControlFile.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select between just retrieving the data (0), writing the mars
parameter values to a csv file (1) or doing both (2).
Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.public">
<code class="sig-name descname">public</code><a class="headerlink" href="#ControlFile.ControlFile.public" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select kind of ECMWF Web Api access and the
possible data sets. Public data sets (1) and Memberstate data sets (0).
Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.ec_api">
<code class="sig-name descname">ec_api</code><a class="headerlink" href="#ControlFile.ControlFile.ec_api" title="Permalink to this definition">¶</a></dt>
<dd><p>Tells wether the ECMWF Web API was able to load or not.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.cds_api">
<code class="sig-name descname">cds_api</code><a class="headerlink" href="#ControlFile.ControlFile.cds_api" title="Permalink to this definition">¶</a></dt>
<dd><p>Tells wether the CDS API was able to load or not.
Default value is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.purefc">
<code class="sig-name descname">purefc</code><a class="headerlink" href="#ControlFile.ControlFile.purefc" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to decide wether the job is a pure forecast retrieval or
coupled with analysis data. Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.rrint">
<code class="sig-name descname">rrint</code><a class="headerlink" href="#ControlFile.ControlFile.rrint" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select between old precipitation disaggregation method (0)
or the new IA3 disaggegration method (1). Default value is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.doubleelda">
<code class="sig-name descname">doubleelda</code><a class="headerlink" href="#ControlFile.ControlFile.doubleelda" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to select the calculation of extra ensemble members for the
ELDA stream. It doubles the amount of retrieved ensemble members.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ControlFile.ControlFile.logicals">
<code class="sig-name descname">logicals</code><a class="headerlink" href="#ControlFile.ControlFile.logicals" title="Permalink to this definition">¶</a></dt>
<dd><p>List of the names of logical switches which controls the flow
of the program. Default list is [‘gauss’, ‘omega’, ‘omegadiff’, ‘eta’,
‘etadiff’, ‘dpdeta’, ‘cwc’, ‘wrf’, ‘ecstorage’,
‘ectrans’, ‘debug’, ‘request’, ‘public’, ‘purefc’, ‘rrint’, ‘doubleelda’]</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ControlFile.ControlFile.assign_args_to_control">
<code class="sig-name descname">assign_args_to_control</code><span class="sig-paren">(</span><em class="sig-param">args</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ControlFile.html#ControlFile.assign_args_to_control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlFile.ControlFile.assign_args_to_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrites the existing ControlFile instance attributes with
the command line arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>Namespace</em>) – Contains the commandline arguments from script/program call.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ControlFile.ControlFile.assign_envs_to_control">
<code class="sig-name descname">assign_envs_to_control</code><span class="sig-paren">(</span><em class="sig-param">envs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ControlFile.html#ControlFile.assign_envs_to_control"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlFile.ControlFile.assign_envs_to_control" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns the ECMWF environment parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>envs</strong> (<em>dict of str</em>) – Contains the ECMWF environment parameternames “ECUID”, “ECGID”,
“DESTINATION” and “GATEWAY” with its corresponding values.
They were read from the file “ECMWF_ENV”.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ControlFile.ControlFile.check_conditions">
<code class="sig-name descname">check_conditions</code><span class="sig-paren">(</span><em class="sig-param">queue</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ControlFile.html#ControlFile.check_conditions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlFile.ControlFile.check_conditions" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks a couple of necessary attributes and conditions,
such as if they exist and contain values.
Otherwise set default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>str</em>) – Name of the queue if submitted to the ECMWF servers.
Used to check if ecuid, ecgid, gateway and destination
are set correctly and are not empty.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ControlFile.ControlFile.to_list">
<code class="sig-name descname">to_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ControlFile.html#ControlFile.to_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ControlFile.ControlFile.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Just generates a list of strings containing the attributes and
assigned values except the attributes “_expanded”, “exedir”,
“flexextractdir” and “installdir”.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>l</strong> – A sorted list of the all ControlFile class attributes with
their values except the attributes “_expanded”, “exedir”,
“flexextractdir” and “installdir”.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list of *</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-EcFlexpart">
<span id="ecflexpart"></span><h3><a class="toc-backref" href="#id8">EcFlexpart</a><a class="headerlink" href="#module-EcFlexpart" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="EcFlexpart.EcFlexpart">
<em class="property">class </em><code class="sig-prename descclassname">EcFlexpart.</code><code class="sig-name descname">EcFlexpart</code><span class="sig-paren">(</span><em class="sig-param">c</em>, <em class="sig-param">fluxes=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/EcFlexpart.html#EcFlexpart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EcFlexpart.EcFlexpart" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to represent FLEXPART specific ECMWF data.</p>
<p>FLEXPART needs grib files in a specifc format. All necessary data fields
for one time step are stored in a single file. The class represents an
instance with all the parameter and settings necessary for retrieving
MARS data and modifing them so they are fitting FLEXPART needs. The class
is able to disaggregate the fluxes and convert grid types to the one needed
by FLEXPART, therefore using the FORTRAN program.</p>
<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.mreq_count">
<code class="sig-name descname">mreq_count</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.mreq_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Counter for the number of generated mars requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.inputdir">
<code class="sig-name descname">inputdir</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.inputdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the directory where the retrieved data is stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.dataset">
<code class="sig-name descname">dataset</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>For public datasets there is the specific naming and parameter
dataset which has to be used to characterize the type of
data.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.basetime">
<code class="sig-name descname">basetime</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.basetime" title="Permalink to this definition">¶</a></dt>
<dd><p>The time for a half day retrieval. The 12 hours upfront are to be
retrieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.dtime">
<code class="sig-name descname">dtime</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.dtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Time step in hours.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.acctype">
<code class="sig-name descname">acctype</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.acctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The field type for the accumulated forecast fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.acctime">
<code class="sig-name descname">acctime</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.acctime" title="Permalink to this definition">¶</a></dt>
<dd><p>The starting time from the accumulated forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.accmaxstep">
<code class="sig-name descname">accmaxstep</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.accmaxstep" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum forecast step for the accumulated forecast fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.marsclass">
<code class="sig-name descname">marsclass</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.marsclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Characterisation of dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.stream">
<code class="sig-name descname">stream</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the forecasting system used to generate the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.number">
<code class="sig-name descname">number</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.number" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects the member in ensemble forecast run.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.resol">
<code class="sig-name descname">resol</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.resol" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the desired triangular truncation of retrieved data,
before carrying out any other selected post-processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.accuracy">
<code class="sig-name descname">accuracy</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the number of bits per value to be used in the
generated GRIB coded fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.addpar">
<code class="sig-name descname">addpar</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.addpar" title="Permalink to this definition">¶</a></dt>
<dd><p>List of additional parameters to be retrieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.level">
<code class="sig-name descname">level</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.level" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the maximum level.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.expver">
<code class="sig-name descname">expver</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.expver" title="Permalink to this definition">¶</a></dt>
<dd><p>The version of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.levelist">
<code class="sig-name descname">levelist</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.levelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the required levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.glevelist">
<code class="sig-name descname">glevelist</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.glevelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the required levels for gaussian grids.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.gaussian">
<code class="sig-name descname">gaussian</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>This parameter is deprecated and should no longer be used.
Specifies the desired type of Gaussian grid for the output.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.grid">
<code class="sig-name descname">grid</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the output grid which can be either a Gaussian grid
or a Latitude/Longitude grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.area">
<code class="sig-name descname">area</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the desired sub-area of data to be extracted.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.purefc">
<code class="sig-name descname">purefc</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.purefc" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch for definition of pure forecast mode or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.outputfilelist">
<code class="sig-name descname">outputfilelist</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.outputfilelist" title="Permalink to this definition">¶</a></dt>
<dd><p>The final list of FLEXPART ready input files.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.types">
<code class="sig-name descname">types</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.types" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the combination of type of fields, time and forecast step
to be retrieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.params">
<code class="sig-name descname">params</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.params" title="Permalink to this definition">¶</a></dt>
<dd><p>Collection of grid types and their corresponding parameters,
levels, level types and the grid definition.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.server">
<code class="sig-name descname">server</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.server" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the connection to the ECMWF data servers.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ECMWFService or ECMWFDataServer</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.public">
<code class="sig-name descname">public</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.public" title="Permalink to this definition">¶</a></dt>
<dd><p>Decides which Web API Server version is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="EcFlexpart.EcFlexpart.dates">
<code class="sig-name descname">dates</code><a class="headerlink" href="#EcFlexpart.EcFlexpart.dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains start and end date of the retrieval in the format
“YYYYMMDD/to/YYYYMMDD”</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EcFlexpart.EcFlexpart.calc_extra_elda">
<code class="sig-name descname">calc_extra_elda</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">prefix</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/EcFlexpart.html#EcFlexpart.calc_extra_elda"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EcFlexpart.EcFlexpart.calc_extra_elda" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates extra ensemble members for ELDA - Stream.</p>
<p>This is a specific feature which doubles the number of ensemble members
for the ELDA Stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Path to the output files.</p></li>
<li><p><strong>prefix</strong> (<em>str</em>) – The prefix of the output filenames as defined in Control file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EcFlexpart.EcFlexpart.create">
<code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param">inputfiles</em>, <em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/EcFlexpart.html#EcFlexpart.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EcFlexpart.EcFlexpart.create" title="Permalink to this definition">¶</a></dt>
<dd><p>An index file will be created which depends on the combination
of “date”, “time” and “stepRange” values. This is used to iterate
over all messages in each grib file which were passed through the
parameter “inputfiles” to seperate specific parameters into fort.*
files. Afterwards the FORTRAN program is called to convert
the data fields all to the same grid and put them in one file
per unique time step (combination of “date”, “time” and
“stepRange”).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is based on the ECMWF example index.py
<a class="reference external" href="https://software.ecmwf.int/wiki/display/GRIB/index.py">https://software.ecmwf.int/wiki/display/GRIB/index.py</a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputfiles</strong> (<a class="reference internal" href="#UioFiles.UioFiles" title="UioFiles.UioFiles"><em>UioFiles</em></a>) – Contains a list of files.</p></li>
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EcFlexpart.EcFlexpart.deacc_fluxes">
<code class="sig-name descname">deacc_fluxes</code><span class="sig-paren">(</span><em class="sig-param">inputfiles</em>, <em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/EcFlexpart.html#EcFlexpart.deacc_fluxes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EcFlexpart.EcFlexpart.deacc_fluxes" title="Permalink to this definition">¶</a></dt>
<dd><p>De-accumulate and disaggregate flux data.</p>
<p>Goes through all flux fields in ordered time and de-accumulate
the fields. Afterwards the fields are disaggregated in time.
Different versions of disaggregation is provided for rainfall
data (darain, modified linear) and the surface fluxes and
stress data (dapoly, cubic polynomial).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputfiles</strong> (<a class="reference internal" href="#UioFiles.UioFiles" title="UioFiles.UioFiles"><em>UioFiles</em></a>) – Contains the list of files that contain flux data.</p></li>
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EcFlexpart.EcFlexpart.process_output">
<code class="sig-name descname">process_output</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/EcFlexpart.html#EcFlexpart.process_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EcFlexpart.EcFlexpart.process_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Postprocessing of FLEXPART input files.</p>
<p>The grib files are postprocessed depending on the selection in
CONTROL file. The resulting files are moved to the output
directory if its not equal to the input directory.
The following modifications might be done if
properly switched in CONTROL file:
GRIB2 - Conversion to GRIB2
ECTRANS - Transfer of files to gateway server
ECSTORAGE - Storage at ECMWF server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EcFlexpart.EcFlexpart.retrieve">
<code class="sig-name descname">retrieve</code><span class="sig-paren">(</span><em class="sig-param">server</em>, <em class="sig-param">dates</em>, <em class="sig-param">public</em>, <em class="sig-param">request</em>, <em class="sig-param">inputdir='.'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/EcFlexpart.html#EcFlexpart.retrieve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EcFlexpart.EcFlexpart.retrieve" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizing the retrieval information by setting final details
depending on grid type.
Prepares MARS retrievals per grid type and submits them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server</strong> (<em>ECMWFService</em><em> or </em><em>ECMWFDataServer</em>) – The connection to the ECMWF server. This is different
for member state users which have full access and non
member state users which have only access to the public
data sets. The decision is made from command line argument
“public”; for public access its True (ECMWFDataServer)
for member state users its False (ECMWFService)</p></li>
<li><p><strong>dates</strong> (<em>str</em>) – Contains start and end date of the retrieval in the format
“YYYYMMDD/to/YYYYMMDD”</p></li>
<li><p><strong>request</strong> (<em>int</em>) – Selects the mode of retrieval.
0: Retrieves the data from ECMWF.
1: Prints the mars requests to an output file.
2: Retrieves the data and prints the mars request.</p></li>
<li><p><strong>inputdir</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to the directory where the retrieved data is about
to be stored. The default is the current directory (‘.’).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="EcFlexpart.EcFlexpart.write_namelist">
<code class="sig-name descname">write_namelist</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/EcFlexpart.html#EcFlexpart.write_namelist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#EcFlexpart.EcFlexpart.write_namelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a namelist file in the temporary directory and writes
the following values to it: maxl, maxb, mlevel,
mlevelist, mnauf, metapar, rlo0, rlo1, rla0, rla1,
momega, momegadiff, mgauss, msmooth, meta, metadiff, mdpdeta</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the namelist file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-GribUtil">
<span id="gributil"></span><h3><a class="toc-backref" href="#id9">GribUtil</a><a class="headerlink" href="#module-GribUtil" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="GribUtil.GribUtil">
<em class="property">class </em><code class="sig-prename descclassname">GribUtil.</code><code class="sig-name descname">GribUtil</code><span class="sig-paren">(</span><em class="sig-param">filenames</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/GribUtil.html#GribUtil"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GribUtil.GribUtil" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for GRIB utilities (new methods) based on GRIB API</p>
<p>The GRIB API provides all necessary tools to work directly with the
grib files. Nevertheless, the GRIB API tools are very basic and are in
direct connection with the grib files. This class provides some higher
functions which apply a set of GRIB API tools together in the respective
context. So, the class initially contains a list of grib files (their
names) and the using program then applies the methods directly on the
class objects without having to think about how the actual GRIB API
tools have to be arranged.</p>
<dl class="method">
<dt id="GribUtil.GribUtil.copy_dummy_msg">
<code class="sig-name descname">copy_dummy_msg</code><span class="sig-paren">(</span><em class="sig-param">filename_in</em>, <em class="sig-param">keynames</em>, <em class="sig-param">keyvalues</em>, <em class="sig-param">selectwhere=True</em>, <em class="sig-param">filemode='wb'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/GribUtil.html#GribUtil.copy_dummy_msg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GribUtil.GribUtil.copy_dummy_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the content of another input grib file to the objects file but
only messages corresponding to keys/values passed to the function.
The selectWhere switch decides if to copy the keys equal to (True) or
different to (False) the keynames/keyvalues list passed to the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename_in</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – Filename of the input file to read the grib messages from.</p></li>
<li><p><strong>selectwhere</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">boolean</span></code>, optional) – Decides if to copy the keynames and values equal to (True) or
different to (False) the keynames/keyvalues list passed to the
function. Default is True.</p></li>
<li><p><strong>keynames</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of keynames.</p></li>
<li><p><strong>keyvalues</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of keyvalues.</p></li>
<li><p><strong>filemode</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>, optional) – Sets the mode for the output file. Default is “wb”.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="GribUtil.GribUtil.get_keys">
<code class="sig-name descname">get_keys</code><span class="sig-paren">(</span><em class="sig-param">keynames</em>, <em class="sig-param">wherekeynames</em>, <em class="sig-param">wherekeyvalues</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/GribUtil.html#GribUtil.get_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GribUtil.GribUtil.get_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Get keyvalues for a given list of keynames a where statement
can be given (list of key and list of values)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keynames</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of keynames.</p></li>
<li><p><strong>wherekeynames</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of key names for indexing grib message parameter.</p></li>
<li><p><strong>wherekeyvalues</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of key values corresponding the key names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>return_list</strong> – List of keyvalues for given keynames.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="GribUtil.GribUtil.index">
<code class="sig-name descname">index</code><span class="sig-paren">(</span><em class="sig-param">index_keys</em>, <em class="sig-param">index_file='my.idx'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/GribUtil.html#GribUtil.index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GribUtil.GribUtil.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Create index file from a list of files if it does not exist or
read an index file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index_keys</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – Contains the list of key parameter names from
which the index is to be created.</p></li>
<li><p><strong>index_file</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>, optional) – Filename where the indices are stored.
Default is “my.idx”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>iid</strong> – Grib index id.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">integer</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="GribUtil.GribUtil.set_keys">
<code class="sig-name descname">set_keys</code><span class="sig-paren">(</span><em class="sig-param">fromfile</em>, <em class="sig-param">filemode='wb'</em>, <em class="sig-param">keynames=[]</em>, <em class="sig-param">keyvalues=[]</em>, <em class="sig-param">wherekeynames=[]</em>, <em class="sig-param">wherekeyvalues=[]</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/GribUtil.html#GribUtil.set_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GribUtil.GribUtil.set_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the file to read the grib messages and then write
the selected messages (with wherekeys) to a new output file.
Also, the keyvalues of the passed list of keynames are set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fromfile</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – Filename of the input file to read the grib messages from.</p></li>
<li><p><strong>keynames</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of keynames to set in the selected messages.
Default is an empty list.</p></li>
<li><p><strong>keyvalues</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of keyvalues to set in the selected messages.
Default is an empty list.</p></li>
<li><p><strong>wherekeynames</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of keynames to select correct message.</p></li>
<li><p><strong>wherekeyvalues</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>) – List of keyvalues for keynames to select correct message.</p></li>
<li><p><strong>filemode</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">string</span></code>, optional) – Sets the mode for the output file. Default is “wb”.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-MarsRetrieval">
<span id="marsretrieval"></span><h3><a class="toc-backref" href="#id10">MarsRetrieval</a><a class="headerlink" href="#module-MarsRetrieval" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="MarsRetrieval.MarsRetrieval">
<em class="property">class </em><code class="sig-prename descclassname">MarsRetrieval.</code><code class="sig-name descname">MarsRetrieval</code><span class="sig-paren">(</span><em class="sig-param">server</em>, <em class="sig-param">public</em>, <em class="sig-param">marsclass='EA'</em>, <em class="sig-param">dataset=''</em>, <em class="sig-param">type=''</em>, <em class="sig-param">levtype=''</em>, <em class="sig-param">levelist=''</em>, <em class="sig-param">repres=''</em>, <em class="sig-param">date=''</em>, <em class="sig-param">resol=''</em>, <em class="sig-param">stream=''</em>, <em class="sig-param">area=''</em>, <em class="sig-param">time=''</em>, <em class="sig-param">step=''</em>, <em class="sig-param">expver='1'</em>, <em class="sig-param">number=''</em>, <em class="sig-param">accuracy=''</em>, <em class="sig-param">grid=''</em>, <em class="sig-param">gaussian=''</em>, <em class="sig-param">target=''</em>, <em class="sig-param">param=''</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/MarsRetrieval.html#MarsRetrieval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MarsRetrieval.MarsRetrieval" title="Permalink to this definition">¶</a></dt>
<dd><p>Specific syntax and content for submission of MARS retrievals.</p>
<p>A MARS revtrieval has a specific syntax with a selection of keywords and
their corresponding values. This class provides the necessary functions
by displaying the selected parameters and their values and the actual
retrievement of the data through a mars request or a Python web api
interface. The initialization already expects all the keyword values.</p>
<p>A description of MARS keywords/arguments and examples of their
values can be found here:
<a class="reference external" href="https://software.ecmwf.int/wiki/display/UDOC/">https://software.ecmwf.int/wiki/display/UDOC/</a>                   Identification+keywords#Identificationkeywords-class</p>
<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.server">
<code class="sig-name descname">server</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.server" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the connection to the ECMWF data servers.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ECMWFService or ECMWFDataServer</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.public">
<code class="sig-name descname">public</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.public" title="Permalink to this definition">¶</a></dt>
<dd><p>Decides which Web API Server version is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.marsclass">
<code class="sig-name descname">marsclass</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.marsclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Characterisation of dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.dataset">
<code class="sig-name descname">dataset</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>For public datasets there is the specific naming and parameter
dataset which has to be used to characterize the type of
data.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.type">
<code class="sig-name descname">type</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the type of fields to be retrieved.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.levtype">
<code class="sig-name descname">levtype</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.levtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Denotes type of level.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.levelist">
<code class="sig-name descname">levelist</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.levelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the required levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.repres">
<code class="sig-name descname">repres</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.repres" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects the representation of the archived data.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.date">
<code class="sig-name descname">date</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.date" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the Analysis date, the Forecast base date or
Observations date.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.resol">
<code class="sig-name descname">resol</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.resol" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the desired triangular truncation of retrieved data,
before carrying out any other selected post-processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.stream">
<code class="sig-name descname">stream</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies the forecasting system used to generate the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.area">
<code class="sig-name descname">area</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.area" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the desired sub-area of data to be extracted.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.time">
<code class="sig-name descname">time</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.time" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the time of the data in hours and minutes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.step">
<code class="sig-name descname">step</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the forecast time step from forecast base time.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.expver">
<code class="sig-name descname">expver</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.expver" title="Permalink to this definition">¶</a></dt>
<dd><p>The version of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.number">
<code class="sig-name descname">number</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.number" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects the member in ensemble forecast run.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.accuracy">
<code class="sig-name descname">accuracy</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the number of bits per value to be used in the
generated GRIB coded fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.grid">
<code class="sig-name descname">grid</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the output grid which can be either a Gaussian grid
or a Latitude/Longitude grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.gaussian">
<code class="sig-name descname">gaussian</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>This parameter is deprecated and should no longer be used.
Specifies the desired type of Gaussian grid for the output.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.target">
<code class="sig-name descname">target</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.target" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies a file into which data is to be written after
retrieval or manipulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="MarsRetrieval.MarsRetrieval.param">
<code class="sig-name descname">param</code><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.param" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the meteorological parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="MarsRetrieval.MarsRetrieval.data_retrieve">
<code class="sig-name descname">data_retrieve</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/MarsRetrieval.html#MarsRetrieval.data_retrieve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.data_retrieve" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a MARS retrieval. Depending on the existence of
ECMWF Web-API or CDS API it is submitted via Python or a
subprocess in the Shell. The parameter for the mars retrieval
are taken from the defined class attributes.</p>
</dd></dl>

<dl class="method">
<dt id="MarsRetrieval.MarsRetrieval.display_info">
<code class="sig-name descname">display_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/MarsRetrieval.html#MarsRetrieval.display_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.display_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints all class attributes and their values to the
standard output.</p>
</dd></dl>

<dl class="method">
<dt id="MarsRetrieval.MarsRetrieval.print_infodata_csv">
<code class="sig-name descname">print_infodata_csv</code><span class="sig-paren">(</span><em class="sig-param">inputdir</em>, <em class="sig-param">request_number</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/MarsRetrieval.html#MarsRetrieval.print_infodata_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MarsRetrieval.MarsRetrieval.print_infodata_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Write all request parameter in alpabetical order into a “csv” file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputdir</strong> (<em>str</em>) – The path where all data from the retrievals are stored.</p></li>
<li><p><strong>request_number</strong> (<em>int</em>) – Number of mars requests for flux and non-flux data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-UioFiles">
<span id="uiofiles"></span><h3><a class="toc-backref" href="#id11">UioFiles</a><a class="headerlink" href="#module-UioFiles" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="UioFiles.UioFiles">
<em class="property">class </em><code class="sig-prename descclassname">UioFiles.</code><code class="sig-name descname">UioFiles</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">pattern</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/UioFiles.html#UioFiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UioFiles.UioFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Collection of files matching a specific pattern.</p>
<p>The pattern can contain regular expressions for the files.
The files are listed and can be transformed to a single string or
they can be deleted.</p>
<dl class="attribute">
<dt id="UioFiles.UioFiles.path">
<code class="sig-name descname">path</code><a class="headerlink" href="#UioFiles.UioFiles.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory where to list the files.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="UioFiles.UioFiles.pattern">
<code class="sig-name descname">pattern</code><a class="headerlink" href="#UioFiles.UioFiles.pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Regular expression pattern. For example: ‘<a href="#id1"><span class="problematic" id="id2">*</span></a>.grb’</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="UioFiles.UioFiles.files">
<code class="sig-name descname">files</code><a class="headerlink" href="#UioFiles.UioFiles.files" title="Permalink to this definition">¶</a></dt>
<dd><p>List of files matching the pattern in the path.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="UioFiles.UioFiles.delete_files">
<code class="sig-name descname">delete_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/UioFiles.html#UioFiles.delete_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#UioFiles.UioFiles.delete_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the files.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="modules">
<h2><a class="toc-backref" href="#id12">Modules</a><a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-get_mars_data">
<span id="get-mars-data"></span><h3><a class="toc-backref" href="#id13">get_mars_data</a><a class="headerlink" href="#module-get_mars_data" title="Permalink to this headline">¶</a></h3>
<p>This script extracts MARS data from ECMWF.</p>
<p>At first, the necessary parameters from command line and CONTROL files are
extracted. They define the data set to be extracted from MARS.</p>
<p>This file can also be imported as a module and contains the following
functions:</p>
<blockquote>
<div><ul class="simple">
<li><p>main            - the main function of the script</p></li>
<li><p>get_mars_data   - overall control of ECMWF data retrievment</p></li>
<li><p>write_reqheader - writes the header into the mars_request file</p></li>
<li><p>mk_server       - creates the server connection to ECMWF servers</p></li>
<li><p>mk_dates        - defines the start and end date</p></li>
<li><p>remove_old      - deletes old retrieved grib files</p></li>
<li><p>do_retrieval    - creates individual retrievals</p></li>
</ul>
</div></blockquote>
<p>Type get_mars_data.py –help
to get information about command line parameters.
Read the documentation for usage instructions.</p>
<dl class="function">
<dt id="get_mars_data.check_dates_for_nonflux_fc_times">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">check_dates_for_nonflux_fc_times</code><span class="sig-paren">(</span><em class="sig-param">types</em>, <em class="sig-param">times</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#check_dates_for_nonflux_fc_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.check_dates_for_nonflux_fc_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the time 18UTC corresponds to forecast field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>types</strong> (<em>list of str</em>) – List of field types.</p></li>
<li><p><strong>times</strong> (<em>list of str</em><em> or </em><em>str</em>) – The time in hours of the field.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True or False</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="get_mars_data.do_retrievement">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">do_retrievement</code><span class="sig-paren">(</span><em class="sig-param">c</em>, <em class="sig-param">server</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em>, <em class="sig-param">delta_t</em>, <em class="sig-param">fluxes=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#do_retrievement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.do_retrievement" title="Permalink to this definition">¶</a></dt>
<dd><p>Divides the total retrieval period into smaller chunks and
retrieves the data from MARS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
<li><p><strong>server</strong> (<em>ECMWFService</em><em> or </em><em>ECMWFDataServer</em>) – The server connection to ECMWF.</p></li>
<li><p><strong>start</strong> (<em>datetime</em>) – The start date of the retrieval.</p></li>
<li><p><strong>end</strong> (<em>datetime</em>) – The end date of the retrieval.</p></li>
<li><p><strong>delta_t</strong> (<em>datetime</em>) – Delta_t + 1 is the maximum time period of a single retrieval.</p></li>
<li><p><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Decides if the flux parameters are to be retrieved or
the rest of the parameter list.
Default value is False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="get_mars_data.get_mars_data">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">get_mars_data</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#get_mars_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.get_mars_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the ECMWF data required for a FLEXPART simulation.</p>
<p>Start and end dates for retrieval period are set. Retrievals
are divided into shorter periods if necessary and if datechunk parameter
is set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="get_mars_data.main">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls the program to retrieve data from MARS.</p>
<p>This is done if called directly from command line.
Then, arguments and control file are taken as input.</p>
</dd></dl>

<dl class="function">
<dt id="get_mars_data.mk_dates">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">mk_dates</code><span class="sig-paren">(</span><em class="sig-param">c</em>, <em class="sig-param">fluxes</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#mk_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.mk_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares start and end date depending on flux or non-flux type of data.</p>
<p>If forecasts for a maximum of one day (24 h) are to be retrieved, then
collect accumulation data (flux data) with additional days in the
beginning and at the end (needed for complete disaggregation of
original period)</p>
<p>If forecast data for more than +24 h are to be retrieved, then
collect accumulation data (flux data) with the exact start and end date
(disaggregation will be done for the exact time period with
boundary conditions)</p>
<p>Since for basetime the extraction contains the 12 hours upfront,
if basetime is 0, the starting date has to be the day before</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
<li><p><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Decides if the flux parameter settings are stored or
the rest of the parameter list.
Default value is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>start</strong> (<em>datetime</em>) – The start date of the retrieving data set.</p></li>
<li><p><strong>end</strong> (<em>datetime</em>) – The end date of the retrieving data set.</p></li>
<li><p><strong>chunk</strong> (<em>datetime</em>) – Time period in days for one single mars retrieval.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="get_mars_data.mk_server">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">mk_server</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#mk_server"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.mk_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a server connection with available Python API.</p>
<p>The API selected depends on availability and the data set to be retrieved.
The CDS API is used for ERA5 data, no matter whether the user is a
member-state or a public user.
ECMWF WebAPI is used for all other available datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>server</strong> – Connection to ECMWF server via python interface ECMWF WebAPI or CDS API.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ECMWFDataServer, ECMWFService or Client</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="get_mars_data.remove_old">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">remove_old</code><span class="sig-paren">(</span><em class="sig-param">pattern</em>, <em class="sig-param">inputdir</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#remove_old"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.remove_old" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes old retrieval files from current input directory
matching the pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<em>str</em>) – The substring pattern which identifies the files to be deleted.</p></li>
<li><p><strong>inputdir</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to the directory where the retrieved data are stored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="get_mars_data.write_reqheader">
<code class="sig-prename descclassname">get_mars_data.</code><code class="sig-name descname">write_reqheader</code><span class="sig-paren">(</span><em class="sig-param">marsfile</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/get_mars_data.html#write_reqheader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#get_mars_data.write_reqheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes header with column names into MARS request file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>marsfile</strong> (<em>str</em>) – Path to the MARS request file.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-prepare_flexpart">
<span id="prepare-flexpart"></span><h3><a class="toc-backref" href="#id14">prepare_flexpart</a><a class="headerlink" href="#module-prepare_flexpart" title="Permalink to this headline">¶</a></h3>
<p>This script prepares the final version of the grib files which are
then used by FLEXPART.</p>
<p>It converts the bunch of grib files extracted via get_mars_data before,
by doing the necessary conversion to obtain consistent grids or the
disaggregation of flux data. Finally, the data fields are combined
in files per hour available with the naming convention xxYYMMDDHH,
where xx should be 2 arbitrary letters (mostly xx is chosen to be “EN”).</p>
<p>This file can also be imported as a module which then contains the following
functions:</p>
<blockquote>
<div><ul class="simple">
<li><p>main</p></li>
<li><p>prepare_flexpart</p></li>
</ul>
</div></blockquote>
<p>Type: prepare_flexpart.py –help
to get information about command line parameters.
Read the documentation for usage instructions.</p>
<dl class="function">
<dt id="prepare_flexpart.main">
<code class="sig-prename descclassname">prepare_flexpart.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/prepare_flexpart.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prepare_flexpart.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls the program to prepare FLEXPART input files from MARS data.</p>
<p>This is done if called directly from the command line.
Then, arguments and control file are taken as input.</p>
</dd></dl>

<dl class="function">
<dt id="prepare_flexpart.prepare_flexpart">
<code class="sig-prename descclassname">prepare_flexpart.</code><code class="sig-name descname">prepare_flexpart</code><span class="sig-paren">(</span><em class="sig-param">ppid</em>, <em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/prepare_flexpart.html#prepare_flexpart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#prepare_flexpart.prepare_flexpart" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the MARS data into files ready as input for FLEXPART.</p>
<p>Certain fields are converted to a different grid and the flux
data are disaggregated. Fields are collected by hour and stored in a file
with a specific naming convention.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ppid</strong> (<em>int</em>) – Contains the ppid number of the current ECMWF job. It will be None if
the method was called within this module.</p></li>
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-tools">
<span id="tools"></span><h3><a class="toc-backref" href="#id15">tools</a><a class="headerlink" href="#module-tools" title="Permalink to this headline">¶</a></h3>
<p>This module contains a collection of diverse tasks within flex_extract.</p>
<dl class="function">
<dt id="tools.clean_up">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">clean_up</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#clean_up"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.clean_up" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove files from the intermediate directory (inputdir).</p>
<p>It keeps the final FLEXPART input files if program runs without
ECMWF API and keywords “ectrans” or “ecstorage” are set to “1”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.execute_subprocess">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">execute_subprocess</code><span class="sig-paren">(</span><em class="sig-param">cmd_list</em>, <em class="sig-param">error_msg='SUBPROCESS FAILED!'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#execute_subprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.execute_subprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a command via a subprocess.</p>
<p>Error handling is done if an error occures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cmd_list</strong> (<em>list of str</em>) – A list of the components for the command line execution.
They will be concatenated with blank space for the command
to be submitted, like [‘mv’, file1, file2] for mv file1 file2.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>error_msg</strong> – Error message if the subprocess fails.
By default it will just say “SUBPROCESS FAILED!”.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.generate_retrieval_period_boundary">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">generate_retrieval_period_boundary</code><span class="sig-paren">(</span><em class="sig-param">c</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#generate_retrieval_period_boundary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.generate_retrieval_period_boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates retrieval period boundary datetimes from CONTROL information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>start_period</strong> (<em>datetime</em>) – The first timestamp of the actual retrieval period disregarding
the temporary times which were used for processing reasons.</p></li>
<li><p><strong>end_period</strong> (<em>datetime</em>) – The last timestamp of the actual retrieval period disregarding
the temporary times which were used for processing reasons.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.get_cmdline_args">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">get_cmdline_args</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#get_cmdline_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.get_cmdline_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Decomposes the command line arguments and assigns them to variables.
Apply default values for arguments not present.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>args</strong> – Contains the command line arguments from the script / program call.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Namespace</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.get_dimensions">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">get_dimensions</code><span class="sig-paren">(</span><em class="sig-param">info</em>, <em class="sig-param">purefc</em>, <em class="sig-param">dtime</em>, <em class="sig-param">index_vals</em>, <em class="sig-param">start_date</em>, <em class="sig-param">end_date</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#get_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.get_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>This function specifies the correct dimensions for x, y, and t.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>info</strong> (<em>dict</em>) – Contains basic informations of the ECMWF grib files, e.g.
‘Ni’, ‘Nj’, ‘latitudeOfFirstGridPointInDegrees’,
‘longitudeOfFirstGridPointInDegrees’, ‘latitudeOfLastGridPointInDegrees’,
‘longitudeOfLastGridPointInDegrees’, ‘jDirectionIncrementInDegrees’,
‘iDirectionIncrementInDegrees’, ‘missingValue’</p></li>
<li><p><strong>purefc</strong> (<em>int</em>) – Switch for definition of pure forecast mode or not.</p></li>
<li><p><strong>dtime</strong> (<em>str</em>) – Time step in hours.</p></li>
<li><p><strong>index_vals</strong> (<em>list of list of str</em>) – Contains the values from the keys used for a distinct selection
of GRIB messages in processing the grib files.
Content looks like e.g.:
index_vals[0]: (‘20171106’, ‘20171107’, ‘20171108’) ; date
index_vals[1]: (‘0’, ‘1200’, ‘1800’, ‘600’) ; time
index_vals[2]: (‘0’, ‘12’, ‘3’, ‘6’, ‘9’) ; stepRange</p></li>
<li><p><strong>start_date</strong> (<em>str</em>) – The start date of the retrieval job.</p></li>
<li><p><strong>end_date</strong> (<em>str</em>) – The end date of the retrieval job.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>(ix, jy, it)</strong> – Dimension in x-direction, y-direction and in time.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple of int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.get_informations">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">get_informations</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#get_informations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.get_informations" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts basic information from a sample grib file.</p>
<p>This information is needed for later use and the
initialization of numpy arrays where data are stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Name of the file which will be opened to extract basic information.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – Contains basic informations of the ECMWF grib files, e.g.
‘Ni’, ‘Nj’, ‘latitudeOfFirstGridPointInDegrees’,
‘longitudeOfFirstGridPointInDegrees’, ‘latitudeOfLastGridPointInDegrees’,
‘longitudeOfLastGridPointInDegrees’, ‘jDirectionIncrementInDegrees’,
‘iDirectionIncrementInDegrees’, ‘missingValue’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.get_list_as_string">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">get_list_as_string</code><span class="sig-paren">(</span><em class="sig-param">list_obj</em>, <em class="sig-param">concatenate_sign='</em>, <em class="sig-param">'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#get_list_as_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.get_list_as_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a list of arbitrary content into a single string using a given
concatenation character.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_obj</strong> (<em>list of *</em>) – A list with arbitrary content.</p></li>
<li><p><strong>concatenate_sign</strong> (<em>str</em><em>, </em><em>optional</em>) – A string which is used to concatenate the single
list elements. Default value is “, “.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>str_of_list</strong> – The content of the list as a single string.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.init128">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">init128</code><span class="sig-paren">(</span><em class="sig-param">filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#init128"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.init128" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens and reads the grib file with table 128 information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path to file of ECMWF grib table number 128.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>table128</strong> – Contains the ECMWF grib table 128 information.
The key is the parameter number and the value is the
short name of the parameter.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.make_dir">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">make_dir</code><span class="sig-paren">(</span><em class="sig-param">directory</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#make_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.make_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a directory.</p>
<p>If the directory already exists, an information is printed and the creation
skipped. The program stops only if there is another problem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>str</em>) – The path to directory which should be created.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.my_error">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">my_error</code><span class="sig-paren">(</span><em class="sig-param">message='ERROR'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#my_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.my_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a specified error message which can be passed to the function
before exiting the program.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em>, </em><em>optional</em>) – Error message. Default value is “ERROR”.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.none_or_int">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">none_or_int</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#none_or_int"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.none_or_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the input string into Pythons None-type if it
contains string “None”; otherwise it is converted to an integer value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>str</em>) – String to be checked for the “None” word.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return depends on the content of the input value. If it was “None”,
then the python type None is returned. Otherwise the string is
converted into an integer value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None or int(value)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.none_or_str">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">none_or_str</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#none_or_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.none_or_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the input string into Pythons None type if it
contains the string “None”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>str</em>) – String to be checked for the “None” word.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return depends on the content of the input value. If it was “None”,
then the Python type None is returned, otherwise the string itself.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None or value</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.normal_exit">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">normal_exit</code><span class="sig-paren">(</span><em class="sig-param">message='Done!'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#normal_exit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.normal_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a specific exit message which can be passed to the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em><em>, </em><em>optional</em>) – Message for exiting program. Default value is “Done!”.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.product">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">product</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#product"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.product" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates combinations of all passed arguments.</p>
<p>This method combines the single characters of the passed arguments
with each other in a way that each character of each argument value
will be combined with each character of the other arguments as a tuple.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is taken from an example at the ECMWF wiki website.
<a class="reference external" href="https://software.ecmwf.int/wiki/display/GRIB/index.py">https://software.ecmwf.int/wiki/display/GRIB/index.py</a>; 2018-03-16</p>
<p>It was released under the following license:
<a class="reference external" href="https://confluence.ecmwf.int/display/ECC/License">https://confluence.ecmwf.int/display/ECC/License</a></p>
</div>
<p class="rubric">Example</p>
<p>product(‘ABCD’, ‘xy’) –&gt; Ax Ay Bx By Cx Cy Dx Dy</p>
<p>product(range(2), repeat = 3) –&gt; 000 001 010 011 100 101 110 111</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> (<em>list</em><em> or </em><em>str</em>) – Positional arguments (arbitrary number).</p></li>
<li><p><strong>**kwds</strong> (<em>dict</em>) – Contains all the keyword arguments from *args.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>prod</strong> – Return will be done with “yield”. A tuple of combined arguments.
See example in description above.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.put_file_to_ecserver">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">put_file_to_ecserver</code><span class="sig-paren">(</span><em class="sig-param">ecd</em>, <em class="sig-param">filename</em>, <em class="sig-param">target</em>, <em class="sig-param">ecuid</em>, <em class="sig-param">ecgid</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#put_file_to_ecserver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.put_file_to_ecserver" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the ecaccess-file-put command to send a file to the ECMWF servers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The return value is just for testing reasons. It does not have
to be used from the calling function since the whole error handling
is done in here.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ecd</strong> (<em>str</em>) – The path were the file is stored.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – The name of the file to send to the ECMWF server.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – The target queue where the file should be sent to.</p></li>
<li><p><strong>ecuid</strong> (<em>str</em>) – The user id on ECMWF server.</p></li>
<li><p><strong>ecgid</strong> (<em>str</em>) – The group id on ECMWF server.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.read_ecenv">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">read_ecenv</code><span class="sig-paren">(</span><em class="sig-param">filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#read_ecenv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.read_ecenv" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the file into a dictionary where the key values are the parameter
names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path to file where the ECMWF environment parameters are stored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>envs</strong> – Contains the environment parameter ecuid, ecgid, gateway
and destination for ECMWF server environments.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.send_mail">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">send_mail</code><span class="sig-paren">(</span><em class="sig-param">users</em>, <em class="sig-param">success_mode</em>, <em class="sig-param">message</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#send_mail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.send_mail" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a specific exit message which can be passed to the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>users</strong> (<em>list of str</em>) – Contains all email addresses which should be notified.
It might also contain just the ecmwf user name which wil trigger
mailing to the associated email address for this user.</p></li>
<li><p><strong>success_mode</strong> (<em>str</em>) – States the exit mode of the program to put into
the mail subject line.</p></li>
<li><p><strong>message</strong> (<em>str</em><em>, </em><em>optional</em>) – Message for exiting program. Default value is “Done!”.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.setup_controldata">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">setup_controldata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#setup_controldata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.setup_controldata" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects, stores and checks controlling arguments from command line,
CONTROL file and ECMWF_ENV file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>c</strong> (<em>ControlFile</em>) – Contains all the parameters of CONTROL file and
command line.</p></li>
<li><p><strong>ppid</strong> (<em>str</em>) – Parent process id.</p></li>
<li><p><strong>queue</strong> (<em>str</em>) – Name of queue for submission to ECMWF (e.g. ecgate or cca )</p></li>
<li><p><strong>job_template</strong> (<em>str</em>) – Name of the job template file for submission to ECMWF server.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.silent_remove">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">silent_remove</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#silent_remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.silent_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove file if it exists.
The function does not fail if the file does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – The name of the file to be removed without notification.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.submit_job_to_ecserver">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">submit_job_to_ecserver</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">jobname</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#submit_job_to_ecserver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.submit_job_to_ecserver" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses ecaccess-job-submit command to submit a job to the ECMWF server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The return value is just for testing reasons. It does not have
to be used from the calling function since the whole error handling
is done in here.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>str</em>) – The target where the file should be sent to, e.g. the queue.</p></li>
<li><p><strong>jobname</strong> (<em>str</em>) – The name of the jobfile to be submitted to the ECMWF server.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>job_id</strong> – The id number of the job as a reference at the ECMWF server.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.to_param_id">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">to_param_id</code><span class="sig-paren">(</span><em class="sig-param">pars</em>, <em class="sig-param">table</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#to_param_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.to_param_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform parameter names to parameter ids with ECMWF grib table 128.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pars</strong> (<em>str</em>) – Addpar argument from CONTROL file in the format of
parameter names instead of IDs. The parameter short
names are separated by “/” and passed as one single string.</p></li>
<li><p><strong>table</strong> (<em>dict</em>) – Contains the ECMWF grib table 128 information.
The key is the parameter number and the value is the
short name of the parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ipar</strong> – List of addpar parameters from CONTROL file transformed to
parameter ids in the format of integer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tools.to_param_id_with_tablenumber">
<code class="sig-prename descclassname">tools.</code><code class="sig-name descname">to_param_id_with_tablenumber</code><span class="sig-paren">(</span><em class="sig-param">pars</em>, <em class="sig-param">table</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/tools.html#to_param_id_with_tablenumber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tools.to_param_id_with_tablenumber" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform parameter names to parameter IDs and add table ID.</p>
<p>Conversion with ECMWF grib table 128.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pars</strong> (<em>str</em>) – Addpar argument from CONTROL file in the format of
parameter names instead of ID. The parameter short
names are separated by “/” and passed as one single string.</p></li>
<li><p><strong>table</strong> (<em>dict</em>) – Contains the ECMWF grib table 128 information.
The key is the parameter number and the value is the
short name of the parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>spar</strong> – List of addpar parameters from CONTROL file transformed to
parameter IDs in the format of integer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-checks">
<span id="checks"></span><h3><a class="toc-backref" href="#id16">checks</a><a class="headerlink" href="#module-checks" title="Permalink to this headline">¶</a></h3>
<p>This module contains check methods for the CONTROL paramaters.</p>
<dl class="function">
<dt id="checks.check_accmaxstep">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_accmaxstep</code><span class="sig-paren">(</span><em class="sig-param">accmaxstep</em>, <em class="sig-param">marsclass</em>, <em class="sig-param">purefc</em>, <em class="sig-param">maxstep</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_accmaxstep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_accmaxstep" title="Permalink to this definition">¶</a></dt>
<dd><p>Guarantees that the accumulation forecast step was set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>accmaxstep</strong> (<em>str</em>) – The maximum forecast step for the accumulated forecast fields.</p></li>
<li><p><strong>marsclass</strong> (<em>str</em>) – ECMWF data classification identifier.</p></li>
<li><p><strong>purefc</strong> (<em>int</em>) – Switch for definition of pure forecast mode or not.</p></li>
<li><p><strong>maxstep</strong> (<em>str</em>) – The maximum forecast time step in hours from the forecast base time.
This is the maximum step for non-flux (accumulated) forecast data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>accmaxstep</strong> – The maximum forecast step for the accumulated forecast fields.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_acctime">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_acctime</code><span class="sig-paren">(</span><em class="sig-param">acctime</em>, <em class="sig-param">marsclass</em>, <em class="sig-param">purefc</em>, <em class="sig-param">time</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_acctime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_acctime" title="Permalink to this definition">¶</a></dt>
<dd><p>Guarantees that the accumulation forecast times were set.</p>
<p>If not set, setting the value to some of the most commonly used data sets
is attempted. Otherwise, an eror is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acctime</strong> (<em>str</em>) – The starting time for the accumulated forecasts.</p></li>
<li><p><strong>marsclass</strong> (<em>str</em>) – ECMWF data classification identifier.</p></li>
<li><p><strong>purefc</strong> (<em>int</em>) – Switch for definition of pure forecast mode or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>acctime</strong> – The starting time for the accumulated forecasts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_acctype">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_acctype</code><span class="sig-paren">(</span><em class="sig-param">acctype</em>, <em class="sig-param">ftype</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_acctype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_acctype" title="Permalink to this definition">¶</a></dt>
<dd><p>Guarantees that the accumulation field type is set.</p>
<p>If not set, it is derived with the old method (TYPE[1]).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>acctype</strong> (<em>str</em>) – The field type for the accumulated forecast fields.</p></li>
<li><p><strong>ftype</strong> (<em>list of str</em>) – List of field types.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>acctype</strong> – The field type for the accumulated forecast fields.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_addpar">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_addpar</code><span class="sig-paren">(</span><em class="sig-param">addpar</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_addpar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_addpar" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that addpar has correct format of additional parameters in
a single string, so that it can be easily appended to the hard-coded
parameters retrieved in any case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>addpar</strong> (<em>str</em><em> or </em><em>list of str</em>) – List of additional parameters to be retrieved.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>addpar</strong> – List of additional parameters to be retrieved.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_area">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_area</code><span class="sig-paren">(</span><em class="sig-param">grid</em>, <em class="sig-param">area</em>, <em class="sig-param">upper</em>, <em class="sig-param">lower</em>, <em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the correct area string.</p>
<p>Checks the format of the four area components wether it is on
the order of 1000 or 1.
Also checks wether area was already set on command line,
then the four components are overwritten.
Convert to correct format of the order of magnitude “1” and sets the
area parameter (North/West/South/East).
E.g.: -5./20./10./10.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid</strong> (<em>str</em>) – Contains grid information.</p></li>
<li><p><strong>area</strong> (<em>str</em>) – Contains area informtion.</p></li>
<li><p><strong>upper</strong> (<em>str</em>) – The northernmost latitude.</p></li>
<li><p><strong>lower</strong> (<em>str</em>) – The southernmost latitude.</p></li>
<li><p><strong>left</strong> (<em>str</em>) – The westernmost longitude.</p></li>
<li><p><strong>right</strong> (<em>str</em>) – The easternmost longitude.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>grid</strong> – Contains grid in format lat/lon. E.g. 0.1/0.1</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_basetime">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_basetime</code><span class="sig-paren">(</span><em class="sig-param">basetime</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_basetime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_basetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if basetime is set and contains one of the two
possible values (0, 12).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>basetime</strong> (<em>int</em><em> or </em><em>str</em><em> or </em><em>None</em>) – The time for a half day retrieval. The 12 hours upfront are to be
retrieved.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>basetime</strong> – The time for a half day retrieval. The 12 hours upfront are to be
retrieved.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int or None</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_dates">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_dates</code><span class="sig-paren">(</span><em class="sig-param">start</em>, <em class="sig-param">end</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if there is at least a start date for a one-day retrieval.</p>
<p>Checks if end date lies after start date and end date is set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>str</em>) – The start date of the retrieval job.</p></li>
<li><p><strong>end</strong> (<em>str</em>) – The end date of the retrieval job.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>start</strong> (<em>str</em>) – The start date of the retrieval job.</p></li>
<li><p><strong>end</strong> (<em>str</em>) – The end date of the retrieval job.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_grid">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_grid</code><span class="sig-paren">(</span><em class="sig-param">grid</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert grid into correct Lat/Lon format. E.g. ‘0.5/0.5’</p>
<p>Checks on format of original grid. Wether it is in the order of 1000 or 1.
Convert to correct grid format and substitute into “Lat/Lon” format string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>grid</strong> (<em>str</em>) – Contains grid information</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>grid</strong> – Contains grid in format Lat/lon. E.g. 0.1/0.1</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_job_chunk">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_job_chunk</code><span class="sig-paren">(</span><em class="sig-param">job_chunk</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_job_chunk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_job_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that if job chunk is set, the number is positive and nonzero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_chunk</strong> (<em>int</em>) – The number of days for a single job script.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>job_chunk</strong> – The number of days for a single job script.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_len_type_time_step">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_len_type_time_step</code><span class="sig-paren">(</span><em class="sig-param">ftype</em>, <em class="sig-param">ftime</em>, <em class="sig-param">steps</em>, <em class="sig-param">maxstep</em>, <em class="sig-param">purefc</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_len_type_time_step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_len_type_time_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ftype</strong> (<em>list of str</em>) – List of field types.</p></li>
<li><p><strong>ftime</strong> (<em>list of str</em><em> or </em><em>str</em>) – The time in hours of the field.</p></li>
<li><p><strong>steps</strong> (<em>str</em>) – Specifies the forecast time step from forecast base time.
Valid values are hours (HH) from forecast base time.</p></li>
<li><p><strong>maxstep</strong> (<em>int</em>) – The maximum forecast time step in hours from the forecast base time.
This is the maximum step for non-flux (not accumulated) forecast data.</p></li>
<li><p><strong>purefc</strong> (<em>int</em>) – Switch for definition of pure forecast mode or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ftype</strong> (<em>list of str</em>) – List of field types.</p></li>
<li><p><strong>ftime</strong> (<em>list of str</em>) – The time in hours of the field.</p></li>
<li><p><strong>steps</strong> (<em>str</em>) – Specifies the forecast time step from forecast base time.
Valid values are hours (HH) from forecast base time.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_levels">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_levels</code><span class="sig-paren">(</span><em class="sig-param">levelist</em>, <em class="sig-param">level</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_levels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_levels" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines correct level list and guarantees that the maximum level is
one of the available maximum levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>levelist</strong> (<em>str</em>) – Specifies the level list.
Examples: model level: 1/to/137, pressure levels: 500/to/1000</p></li>
<li><p><strong>level</strong> (<em>str</em>) – Specifies the maximum level.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>levelist</strong> (<em>str</em>) – Specifies the required levels. It has to have a valid
correspondence to the selected levtype.
Examples: model level: 1/to/137, pressure levels: 500/to/1000</p></li>
<li><p><strong>level</strong> (<em>str</em>) – Specifies the maximum level. It has to be one of the
available maximum level numbers as contained in the variable
MAX_LEVEL_LIST in “_config”: [16, 19, 31, 40, 50, 60, 62, 91, 137]</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_logicals_type">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_logicals_type</code><span class="sig-paren">(</span><em class="sig-param">c</em>, <em class="sig-param">logicals</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_logicals_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_logicals_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the logical variables have correct type integer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
<li><p><strong>logicals</strong> (<em>list of</em><em> (</em><em>str</em><em> or </em><em>int</em><em>)</em>) – Names of the switches that are used to control the flow of the
program.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_mail">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_mail</code><span class="sig-paren">(</span><em class="sig-param">mail</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_mail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_mail" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the string of mail addresses, separate them and convert to list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mail</strong> (<em>list of str</em><em> or </em><em>str</em>) – Contains email addresses for notifications.
It might also contain just the ecmwf user name which will trigger
mailing to the associated email address for this user.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mail</strong> – Contains email addresses for notifications.
It might also contain just the ecmwf user name which will trigger
mailing to the associated email address for this user.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_maxstep">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_maxstep</code><span class="sig-paren">(</span><em class="sig-param">maxstep</em>, <em class="sig-param">steps</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_maxstep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_maxstep" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert maxstep into integer if it is already given. Otherwise, select
maxstep by going through the steps list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maxstep</strong> (<em>str</em>) – The maximum forecast time step in hours from the forecast base time.
This is the maximum step for non flux (accumulated) forecast data.</p></li>
<li><p><strong>steps</strong> (<em>str</em>) – Specifies the forecast time step from forecast base time.
Valid values are hours (HH) from forecast base time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>maxstep</strong> – The maximum forecast time step in hours from the forecast base time.
This is the maximum step for non flux (accumulated) forecast data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_number">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_number</code><span class="sig-paren">(</span><em class="sig-param">number</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for correct string format of ensemble member numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number</strong> (<em>str</em>) – List of ensemble member forecast runs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>number</strong> – String with list of ensemble member forecast runs. E.g. ‘01/02/03/04’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_pathes">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_pathes</code><span class="sig-paren">(</span><em class="sig-param">idir</em>, <em class="sig-param">odir</em>, <em class="sig-param">fpdir</em>, <em class="sig-param">fedir</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_pathes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_pathes" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if output and flexpart pathes are set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idir</strong> (<em>str</em>) – Path to the temporary directory for MARS retrieval data.</p></li>
<li><p><strong>odir</strong> (<em>str</em>) – Path to the final output directory where the FLEXPART input files
will be stored.</p></li>
<li><p><strong>fpdir</strong> (<em>str</em>) – Path to FLEXPART root directory.</p></li>
<li><p><strong>fedir</strong> (<em>str</em>) – Path to flex_extract root directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>odir</strong> (<em>str</em>) – Path to the final output directory where the FLEXPART input files
will be stored.</p></li>
<li><p><strong>fpdir</strong> (<em>str</em>) – Path to FLEXPART root directory.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_ppid">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_ppid</code><span class="sig-paren">(</span><em class="sig-param">c</em>, <em class="sig-param">ppid</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_ppid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_ppid" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the current PPID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c</strong> (<a class="reference internal" href="#ControlFile.ControlFile" title="ControlFile.ControlFile"><em>ControlFile</em></a>) – Contains all the parameters of CONTROL file and
command line.</p></li>
<li><p><strong>ppid</strong> (<em>int</em><em> or </em><em>None</em>) – Contains the ppid number provided by the command line parameter
of is None otherwise.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_public">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_public</code><span class="sig-paren">(</span><em class="sig-param">public</em>, <em class="sig-param">dataset</em>, <em class="sig-param">marsclass</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_public"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_public" title="Permalink to this definition">¶</a></dt>
<dd><p>Check wether the dataset parameter is set to a
public data set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>public</strong> (<em>int</em>) – Specifies if public data are to be retrieved or not.</p></li>
<li><p><strong>dataset</strong> (<em>str</em>) – Specific name which identifies the public dataset.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_purefc">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_purefc</code><span class="sig-paren">(</span><em class="sig-param">ftype</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_purefc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_purefc" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for a pure forecast mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ftype</strong> (<em>list of str</em>) – List of field types.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if pure forecasts are to be retrieved. False if there are
analysis fields in between.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True or False</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_queue">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_queue</code><span class="sig-paren">(</span><em class="sig-param">queue</em>, <em class="sig-param">gateway</em>, <em class="sig-param">destination</em>, <em class="sig-param">ecuid</em>, <em class="sig-param">ecgid</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_queue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the necessary ECMWF parameters are set if the queue is
one of the QUEUES_LIST (in _config).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queue</strong> (<em>str</em>) – Name of the queue if submitted to the ECMWF servers.
Used to check if ecuid, ecgid, gateway and destination
are set correctly and are not empty.</p></li>
<li><p><strong>gateway</strong> (<em>str</em>) – The address of the gateway server.</p></li>
<li><p><strong>destination</strong> (<em>str</em>) – The name of the destination of the gateway server for data
transfer through ectrans. E.g. <a class="reference external" href="mailto:name&#37;&#52;&#48;genericSftp">name<span>&#64;</span>genericSftp</a></p></li>
<li><p><strong>ecuid</strong> (<em>str</em>) – ECMWF user id.</p></li>
<li><p><strong>ecgid</strong> (<em>str</em>) – ECMWF group id.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_request">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_request</code><span class="sig-paren">(</span><em class="sig-param">request</em>, <em class="sig-param">marsfile</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if there is an old MARS request file; if so, remove it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>int</em>) – Selects the mode of retrieval.
0: Retrieves the data from ECMWF.
1: Prints the mars requests to an output file.
2: Retrieves the data and prints the mars request.</p></li>
<li><p><strong>marsfile</strong> (<em>str</em>) – Path to the mars request file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_step">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_step</code><span class="sig-paren">(</span><em class="sig-param">step</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks on step format and convert into a list of steps.</p>
<p>If the steps were defined with “to” and “by” they are converted into
a list of steps. If the steps were set in a string, it is
converted into a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>step</strong> (<em>list of str</em><em> or </em><em>str</em>) – Specifies the forecast time step from forecast base time.
Valid values are hours (HH) from forecast base time.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>step</strong> – List of forecast steps in format e.g. [001, 002, …]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_time">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_time</code><span class="sig-paren">(</span><em class="sig-param">ftime</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if time variable is of type list. Otherwise convert to list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ftime</strong> (<em>list of str</em><em> or </em><em>str</em>) – The time in hours of the field.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ftime</strong> – The time in hours of the field.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="checks.check_type">
<code class="sig-prename descclassname">checks.</code><code class="sig-name descname">check_type</code><span class="sig-paren">(</span><em class="sig-param">ftype</em>, <em class="sig-param">steps</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/checks.html#check_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#checks.check_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if type variable is of type list and if analysis field has
forecast step 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ftype</strong> (<em>list of str</em><em> or </em><em>str</em>) – List of field types.</p></li>
<li><p><strong>steps</strong> (<em>str</em>) – Specifies the forecast time step from forecast base time.
Valid values are hours (HH) from forecast base time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ftype</strong> – List of field types.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-disaggregation">
<span id="disaggregation"></span><h3><a class="toc-backref" href="#id17">disaggregation</a><a class="headerlink" href="#module-disaggregation" title="Permalink to this headline">¶</a></h3>
<p>Disaggregation of deaccumulated flux data from an ECMWF model FG field.</p>
<dl class="simple">
<dt>Initially the flux data to be concerned are:</dt><dd><ul class="simple">
<li><p>large-scale precipitation</p></li>
<li><p>convective precipitation</p></li>
<li><p>surface sensible heat flux</p></li>
<li><p>surface solar radiation</p></li>
<li><p>u stress</p></li>
<li><p>v stress</p></li>
</ul>
</dd>
</dl>
<p>Different versions of disaggregation is provided for rainfall
data (darain, modified linear) and the surface fluxes and
stress data (dapoly, cubic polynomial).</p>
<dl class="function">
<dt id="disaggregation.IA3">
<code class="sig-prename descclassname">disaggregation.</code><code class="sig-name descname">IA3</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/disaggregation.html#IA3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#disaggregation.IA3" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolation with a non-negative geometric mean based algorithm.</p>
<p>The original grid is reconstructed by adding two sampling points in each
data series interval. This subgrid is used to keep all information during
the interpolation within the associated interval. Additionally, an advanced
monotonicity filter is applied to improve the monotonicity properties of
the series.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(C) Copyright 2017-2019
Sabine Hittmeir, Anne Philipp, Petra Seibert</p>
<p>This work is licensed under the Creative Commons Attribution 4.0
International License. To view a copy of this license, visit
<a class="reference external" href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</a> or send a letter to
Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>list of float</em>) – Complete data series that will be interpolated having
the dimension of the original raw series.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>f</strong> – The interpolated data series with additional subgrid points.
Its dimension is equal to the length of the input data series
times three.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of float</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>For more information see article:
Hittmeir, S.; Philipp, A.; Seibert, P. (2017): A conservative
interpolation scheme for extensive quantities with application to the
Lagrangian particle dispersion model FLEXPART.,
Geoscientific Model Development</p>
</dd></dl>

<dl class="function">
<dt id="disaggregation.dapoly">
<code class="sig-prename descclassname">disaggregation.</code><code class="sig-name descname">dapoly</code><span class="sig-paren">(</span><em class="sig-param">alist</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/disaggregation.html#dapoly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#disaggregation.dapoly" title="Permalink to this definition">¶</a></dt>
<dd><p>Cubic polynomial interpolation of deaccumulated fluxes.</p>
<p>Interpolation of deaccumulated fluxes of an ECMWF model FG field
using a cubic polynomial solution which conserves the integrals
of the fluxes within each timespan.
Disaggregation is done for 4 accumluated timespans which
generates a new, disaggregated value which is output at the
central point of the 4 accumulation timespans.
This new point is used for linear interpolation of the complete
timeseries afterwards.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>alist</strong> (<em>list of array of float</em>) – List of 4 timespans as 2-dimensional, horizontal fields.
E.g. [[array_t1], [array_t2], [array_t3], [array_t4]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>nfield</strong> – Interpolated flux at central point of accumulation timespan.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array of float</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>March 2000<span class="classifier">P. JAMES</span></dt><dd><p>Original author</p>
</dd>
<dt>June 2003<span class="classifier">A. BECK</span></dt><dd><p>Adaptations</p>
</dd>
<dt>November 2015<span class="classifier">Leopold Haimberger (University of Vienna)</span></dt><dd><p>Migration from Fortran to Python</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="function">
<dt id="disaggregation.darain">
<code class="sig-prename descclassname">disaggregation.</code><code class="sig-name descname">darain</code><span class="sig-paren">(</span><em class="sig-param">alist</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/disaggregation.html#darain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#disaggregation.darain" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear interpolation of deaccumulated fluxes.</p>
<p>Interpolation of deaccumulated fluxes of an ECMWF model FG rainfall
field using a modified linear solution which conserves the integrals
of the fluxes within each timespan.
Disaggregation is done for 4 accumluated timespans which generates
a new, disaggregated value which is output at the central point
of the 4 accumulation timespans. This new point is used for linear
interpolation of the complete timeseries afterwards.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>alist</strong> (<em>list of array of float</em>) – List of 4 timespans as 2-dimensional, horizontal fields.
E.g. [[array_t1], [array_t2], [array_t3], [array_t4]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>nfield</strong> – Interpolated flux at central point of accumulation timespan.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array of float</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>March 2000<span class="classifier">P. JAMES</span></dt><dd><p>Original author</p>
</dd>
<dt>June 2003<span class="classifier">A. BECK</span></dt><dd><p>Adaptations</p>
</dd>
<dt>November 2015<span class="classifier">Leopold Haimberger (University of Vienna)</span></dt><dd><p>Migration from Fortran to Python</p>
</dd>
</dl>
</div>
</dd></dl>

<div class="toctree-wrapper compound">
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_fortran.html" class="btn btn-neutral float-right" title="Auto-generated documentation for the Fortran programme" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../api.html" class="btn btn-neutral float-left" title="Auto-generated documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Anne Philipp, Leopold Haimberger and Petra Seibert

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>